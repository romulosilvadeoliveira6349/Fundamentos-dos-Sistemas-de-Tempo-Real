<html xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office"
  xmlns:w="urn:schemas-microsoft-com:office:word" xmlns="http://www.w3.org/TR/REC-html40">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="ProgId" content="Word.Document">
    <meta name="Generator" content="Microsoft Word 11">
    <meta name="Originator" content="Microsoft Word 11">
    <link rel="File-List" href="trabalhos-2017-2_files/filelist.xml">
    <title>Fundamentos dos Sistemas de Tempo Real</title>
    <!--[if gte mso 9]><xml>
 <w:WordDocument>  <w:HyphenationZone>21</w:HyphenationZone>  <w:ValidateAgainstSchemas/>  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel> </w:WordDocument></xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156"> </w:LatentStyles></xml><![endif]-->
    <style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
h2
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:18.0pt;
	font-family:"Times New Roman";
	color:black;
	font-weight:bold;}
h3
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	mso-outline-level:3;
	font-size:13.5pt;
	font-family:"Times New Roman";
	color:black;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
p
	{mso-margin-top-alt:auto;
	margin-right:0cm;
	mso-margin-bottom-alt:auto;
	margin-left:0cm;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	color:black;}
@page Section1
	{size:612.0pt 792.0pt;
	margin:70.85pt 3.0cm 70.85pt 3.0cm;
	mso-header-margin:35.4pt;
	mso-footer-margin:35.4pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style><!--[if gte mso 10]>
<style> /* Style Definitions */ table.MsoNormalTable	{mso-style-name:"Table Normal";	mso-tstyle-rowband-size:0;	mso-tstyle-colband-size:0;	mso-style-noshow:yes;	mso-style-parent:"";	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;	mso-para-margin:0cm;	mso-para-margin-bottom:.0001pt;	mso-pagination:widow-orphan;	font-size:10.0pt;	font-family:"Times New Roman";	mso-ansi-language:#0400;	mso-fareast-language:#0400;	mso-bidi-language:#0400;}</style><![endif]-->
    <meta name="author" content="Rômulo Silva de Oliveira">
    <meta name="created" content="0;0">
    <meta name="changed" content="20150306;83717115525785">
    <meta name="CHANGEDBY" content="Rômulo Oliveira">
    <meta name="CHANGEDBY" content="Rômulo Oliveira">
    <meta name="CHANGEDBY" content="Rômulo Oliveira">
    <meta name="CHANGEDBY" content="Rômulo Oliveira">
    <meta name="CHANGEDBY" content="Rômulo Oliveira">
    <meta name="CHANGEDBY" content="Rômulo Oliveira">
    <meta name="CHANGEDBY" content="Rômulo Oliveira">
    <meta name="CHANGEDBY" content="Rômulo Oliveira">
    <!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/></xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">  <o:idmap v:ext="edit" data="1"/> </o:shapelayout></xml><![endif]-->
  </head>
  <body style="tab-interval:35.4pt" vlink="blue" link="blue" lang="PT-BR">
    <div class="Section1">
      <h1>SUGESTÕES DE TRABALHOS</h1>
      <h1> </h1>
      <blockquote style="margin-top:5.1pt;margin-bottom:5.1pt">
        <p class="MsoNormal" style="margin-bottom:12.0pt">Podem ser feitos no
          Linux ou no Windows 10 com WSL2.</p>
        <p class="MsoNormal" style="margin-bottom:12.0pt"><br>
        </p>
        <h2 class="MsoNormal" style="  margin-bottom:12.0pt">Dicas para WSL2
          (Linux sobre Windows10)<br>
        </h2>
        <p class="MsoNormal" style="margin-bottom:12.0pt"><a href="https://www.youtube.com/watch?v=8Z5MEBKBlcw"><o:p>VÍDEO:
              Usando Ubuntu sobre WSL2-Windows10 para fazer trabalhos</o:p></a></p>
        <p class="MsoNormal" style="margin-bottom:12.0pt"><o:p>Instalar
            notepad++ no Windows<br>
            Criar um diretorio de trabalho no Windows<br>
            Baixar simulador da caldeira e exemplos em C para o diretório de
            trabalho no Windows<br>
            <br>
            ----------<br>
            <br>
            Abrir uma janela PowerShell no Windows<br>
            Mudar para o diretório de trabalho no Windows<br>
            Executa o simulador normalmente com java (liberar acesso dele à
            internet)<br>
            Edita os programas no Windows usando notepad++<br>
            <br>
            ----------<br>
            <br>
            Instala WSL2 no Windows, ver como no site da Microsoft e youtube<br>
            Escolhe e instala uma distribuição Linux no WSL2, ver site Microsoft<br>
            * Usei o Ubuntu mais recente disponibilizado pela Microsoft<br>
            <br>
            ----------<br>
            <br>
            Dispara execução do Linux via WSL2<br>
            Instalar gcc no Linux<br>
            * sudo apt install gcc no Ubuntu<br>
            Descobrir o IP da máquina windows (nameserver) com<br>
            * cat /etc/resolv.conf<br>
            <br>
            ----------<br>
            <br>
            Muda no Linux para o diretório /mnt/c/Users/Romulo/Desktop/....<br>
            * No caso coloquei meu diretório de trabalho no Desktop Windows<br>
            <br>
            Compila programas em C com gcc no Linux<br>
            Executa os programas compilados pelo gcc no Linux<br>
            <br>
            ----------<br>
            <br>
            Temos então:<br>
            <br>
            - Todos os arquivos de trabalho ficam no diretório de trabalho no
            Windows<br>
            - O simulador roda no Windows via PowerShell<br>
            <br>
            - O gcc roda no Linux<br>
            - Os programas compilados com o gcc rodam no Linux<br>
            <br>
            - Existe comunicação udp/ip entre Windows e Linux<br>
            - Tanto Windows como Linux acessam os mesmos arquivos no mesmo
            diretório (do Windows)<br>
            <br>
            - Caso necessário, pode-se abrir várias janelas PowerShell
            simultâneas<br>
            - Caso necessário, no PowerShell ao executar "wsl" temos um terminal
            no Linux rodando bash<br>
          </o:p></p>
        <p class="MsoNormal" style="margin-bottom:12.0pt"><br>
        </p>
        <h2 class="MsoNormal" style="  margin-bottom:12.0pt">Exemplos com
          códigos auxiliares</h2>
        <a href="udpcliente.c" style="color: rgb(0, 0, 255);">Exemplo cliente
          UDP</a><br>
        <br>
        <a href="udpservidor.c" style="color: rgb(0, 0, 255);">Exemplo servidor
          UDP</a><br>
        <br>
        <br>
        <b> Exemplo de tarefa periódica:</b> &nbsp; <a href="periodica.c">periodica.c<br>
        </a><br>
        <a href="https://www.youtube.com/watch?v=rndtCLAqI-A">VÍDEO: 18.x1
          Sistemas Operacionais de Tempo Real (parte extra 1) - Tarefa Periódica
          com C no Linux</a><br>
        <br>
        <br>
        <b>Exemplos com pthreads:</b>&nbsp;&nbsp; <a href="pthread-ex1.c">pthread-ex1.c</a>&nbsp;&nbsp;
        <a href="pthread-ex2.c">pthread-ex2.c</a>&nbsp;&nbsp; <span style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 232); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;"></span><br
          style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;">
        &nbsp; <br>
        <a href="https://www.youtube.com/watch?v=-gX4NTVBBFA">VÍDEO: 11.x1
          Sincronização e Comunicação entre Tarefas (parte extra 1) - Threads no
          Linux com C e Pthreads</a><br>
        <br>
        <br>
        <b> Exemplos com pthreads:</b>&nbsp;&nbsp; <a href="pthread-ex3.c">pthread-ex3.c</a><span
          style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 232); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;"></span><br
          style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;">
        &nbsp; <br>
        <a href="https://www.youtube.com/watch?v=-gX4NTVBBFA"></a><a href="https://www.youtube.com/watch?v=xD1T3eHMnAo">VÍDEO:
          11.x2 Sincronização e Comunicação entre Tarefas (parte extra 2) -
          Mutex com C e Pthreads</a><br>
        <br>
        <br>
        <b> Exemplos com pthreads:</b>&nbsp;&nbsp; <a href="pthread-ex4.c">pthread-ex4.c</a><span
          style="color: rgb(0, 0, 0); font-family: &quot;Times New Roman&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 232); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;"></span><br>
        <br>
        <a href="https://youtu.be/hvEtcxN2NiY">VÍDEO: 11.x3 EXTRA-3-Mutex-Linux</a><br>
        <br>
        <br>
        <b> Exemplo de entrada e saída:</b>&nbsp;&nbsp; <a href="sincrono.c">sincrono.c</a>&nbsp;&nbsp;
        <a href="assincrono.c">assincrono.c</a>&nbsp;&nbsp; <br>
        &nbsp;<br>
        <span style="color: blue;"></span><a href="https://youtu.be/UwGtrSk8kvU">VÍDEO:
          7.x1 EXTRA-1-Entrada e Saída Síncrona e Assíncrona</a><br>
        <br>
        <br>
        <o:p><b>Exemplos de como tratar falhas de sensor:</b>&nbsp;&nbsp; <a href="cliente1_espera.c">cliente1.c</a>
          &nbsp; <a href="cliente2_timeout.c">cliente2.c</a> &nbsp; <a href="cliente3_tolera5.c">cliente3.c</a>
          &nbsp; <a href="cliente4_valorAbsurdo.c">cliente4.c</a> &nbsp; <a href="cliente5_compara.c">cliente5.c</a>
          &nbsp; <a href="servidor1_ok.c">servidor1.c</a> &nbsp; <a href="servidor2_absurdo.c">servidor2.c</a>
          &nbsp; <a href="servidor3_dois.c">servidor3.c</a><br>
        </o:p><br>
        <a href="https://youtu.be/5XCRHOTSYeU"><o:p>VÍDEO: Exemplos de
            tratamento para falhas de sensor</o:p></a> <br>
        <b><br>
          <br>
          Exemplo com várias threads usando a tela:</b>&nbsp;&nbsp; <a href="console1_main.c">console1_main.c</a>&nbsp;&nbsp;&nbsp;&nbsp;
        <a href="console1.c">console1.c</a>&nbsp; &nbsp;&nbsp; <a href="console1.h">console1.h</a>&nbsp;&nbsp;
        <br><a href="https://youtu.be/CxcXSiw6XUg"><span style="color: blue;"></span></a><br>
        <a href="https://youtu.be/CxcXSiw6XUg">VÍDEO: Exemplo com várias threads
          usando a tela</a><br>
        <br>
        <b> </b><br>
        <b>Exemplo com ncurses:</b>&nbsp;&nbsp; <a href="console2_main.c">console2_main.c</a>&nbsp;&nbsp;
        <br><br>
        <a href="https://youtu.be/E4bszpOU6iM">VÍDEO: Exemplo com ncurses</a><br>
        <br>
        <br>
        <a href="https://www.youtube.com/watch?v=CQio1Q1RmJk">VÍDEO:
          Pthread_cancel() em thread bloqueada no wait()</a><br>
        <br>
        <br>
      </blockquote>
      <blockquote style="margin-top:5.1pt;margin-bottom:5.1pt"> </blockquote>
      <h2>Sugestão ST1 - Trabalho do controlador de sistemas contínuos
        sequencial e tempo real</h2>
      <p><a href="https://www.youtube.com/watch?v=ZPSq4zozfTE">VÍDEO: Descrição
          do Trabalho 1 (1 de 3): Descrição da caldeira e sua instrumentação</a></p>
      <p><a href="https://www.youtube.com/watch?v=cgnx3cxVuDU">VÍDEO: Descrição
          do Trabalho 1 (2 de 3): Simulador da caldeira</a> </p>
      <p><a href="https://www.youtube.com/watch?v=RQhIx62PV_0">VÍDEO: Descrição
          do Trabalho 1 (3 de 3): Comunicação com o Simulador da Caldeira</a></p>
      <p><br>
      </p>
      <p>Implementar o controle e a supervisão do sistema descrito <a href="controle-caldeira-2.pdf">aqui</a>.
        <br>
        <br>
        <a href="aquecedor2008_1.jar">Simulador</a> é usado para simular uma
        unidade de caldeira e é chamado com: <br>
        java -jar aquecedor2008_1.jar &lt;número-porta-escutada&gt;</p>
      <p>A caldeira possui instrumentação embutida e aceita os seguintes
        comandos: <br>
        "sta0" lê valor de Ta <br>
        "st-0" lê valor de T <br>
        "sti0" lê valor de Ti <br>
        "sno0" lê valor de No <br>
        "sh-0" lê valor de H <br>
        "ani123.4" define valor de Ni como 123.4 <br>
        "aq-567.8" define valor de Q como 567.8 <br>
        "ana123.4" define valor de Na como 123.4 <br>
        "anf123.4" define valor de Nf como 123.4 </p>
      <p>Cuidado com a formatação dos valores em ponto flutuante.</p>
      <p>Implementar em C no Linux o programa CONTROLADOR, o qual deve incluir
        as seguintes funcionalidades de controle: </p>
      <p>- Laço de controle como tarefa periódica para a temperatura;<br>
        - Uso do tanque auxiliar e da saída de água;<br>
        - Informações na tela sobre a situação corrente.<br>
        <br>
        Outros requisitos: <br>
        - Não usar threads;<br>
        - Período do controlador de temperatura deve ser 30ms exato, ver
        exemplo;<br>
        - Atualização da tela pode ser aproximadamente a cada 1 segundo.</p>
      <p class="MsoNormal"><o:p>&nbsp;</o:p></p>
      <h3>Medições de tempo real</h3>
      <p class="MsoNormal">Partindo do programa controlador desenvolvido, meça o
        tempo de resposta do controle de temperatura. </p>
      <p>O tempo de resposta inicia no momento t de acordar. Após concluir o
        controlador, antes de calcular o novo t de acordar, obtenha a hora atual
        t1. Com "t1 - t" temos o tempo de resposta do controlador em questão.
        Cuidado com a divisão de segundos e nanosegundos. Para maior precisão,
        NÃO converta para float ou double, mas mantenha em long+long (segundos e
        nanosegundos) até fazer a subtração.<br>
        <br>
        Armazene esta informação em um array e depois de algum tempo grave em
        arquivo.</p>
      <p>Apresente um <strong>histograma</strong> destas medições. Identifique
        o pior caso, isto é, o maior tempo de resposta observado (high water
        mark). <br>
        <br>
        Até que período seria possível levar o controlador nestas condições de
        execução ? </p>
      <p>Usar as funções clock_nanosleep e clock_gettime.</p>
      <p>Adicionalmente:</p>
      <p>- Número de amostras &gt;= 10000.</p>
      <p>- Usar como unidade microsegundo nos gráficos.</p>
      <p>- Fazer a coleta dos dados em máquina real e não em máquina virtual.</p>
      <p>- Gerar relatório em PDF com texto descrevendo as observações e os
        gráficos.</p>
      <p><o:p><br>
        </o:p></p>
      <p><o:p>&nbsp; <br>
        </o:p></p>
      <h2>Sugestão ST2 - Trabalho do controlador de sistemas contínuos
        concorrente</h2>
      <p><a href="https://www.youtube.com/watch?v=cLVTDSLXTCY">VÍDEO: Descrição
          do Trabalho 2: Controlador da caldeira com várias threads<br>
        </a></p>
      <p><a href="https://www.youtube.com/watch?v=y5aa-NQ7TQ4">VÍDEO: 13.5.
          Mecanismos de Sincronização Variáveis Compartilhadas (parte 5 de 5) -
          Exemplo Buffer Duplo</a></p>
      <p><br>
      </p>
      <p>Implementar o controle e a supervisão do sistema descrito <a href="controle-caldeira-2.pdf">aqui</a>.
        <br>
        <br>
        <a href="aquecedor2008_1.jar">Simulador</a> é usado para simular uma
        unidade de caldeira e é chamado com: <br>
        java -jar aquecedor2008_1.jar &lt;número-porta-escutada&gt;</p>
      <p>A caldeira possui instrumentação embutida e aceita os seguintes
        comandos: <br>
        "sta0" lê valor de Ta <br>
        "st-0" lê valor de T <br>
        "sti0" lê valor de Ti <br>
        "sno0" lê valor de No <br>
        "sh-0" lê valor de H <br>
        "ani123.4" define valor de Ni como 123.4 <br>
        "aq-567.8" define valor de Q como 567.8 <br>
        "ana123.4" define valor de Na como 123.4 <br>
        "anf123.4" define valor de Nf como 123.4 </p>
      <p>Cuidado com a formatação dos valores em ponto flutuante.</p>
      <p>Implementar em C no Linux, utilizando a biblioteca das pthreads, o
        programa CONTROLADOR, o qual deve incluir as seguintes funcionalidades
        de controle: </p>
      <p>- Laço de controle como tarefa periódica para a temperatura;</p>
      <p>- Laço de controle como tarefa periódica para o nível (pode considerar
        estratégias separadas e não multivariável);</p>
      <p>- Uso do tanque auxiliar e da saída de água;</p>
      <p>- Informações na tela sobre a situação corrente;</p>
      <p>- Verificação da temperatura a cada 10ms para disparo de tarefa de
        alarme caso esteja acima de 30 graus.</p>
      <p>- Entrada através do teclado dos valores de referência para nível e
        temperatura;</p>
      <p>- Armazenagem periódica dos valores lidos de temperatura e armazenagem
        desses dados<br>
        em arquivo, através de buffer duplo (produtor/consumidor).</p>
      <span style="font-family: &quot;Times New Roman&quot;;"> </span><br>
      <p class="MsoNormal" style="margin-bottom:12.0pt"> Outros requisitos: <br>
        - Usar mutex para proteger as variáveis compartilhadas;<br>
        - Tarefas periódicas implementadas com precisão e não com sleep fixo;<br>
        - Período do controlador de temperatura deve ser 50ms;<br>
        - Período do controlador de nível deve ser 70ms;<br>
        - Atualização da tela pode ser com sleep simples de 1 segundo.</p>
    </div>
    <div class="Section1"><br>
      <p class="MsoNormal" style="margin-bottom:12.0pt">Alguns aspectos para a
        composição da nota do trabalho do controlador: <br>
        - Fez no Linux, em C, usando a biblioteca das pthreads ? <br>
        - Foi usado um mutex para cada estrutura compartilhada ? <br>
        - A aplicação apresenta valores dos sensores na tela ? <br>
        - A aplicação possui laços de controle para temperatura e nível ? <br>
        - A aplicação acessa teclado durante a execução do controlador, afeta
        valor de referência ? <br>
        - A aplicação grava leituras em arquivo ?<br>
        - As tarefas de controle são realmente periódicas ?<br>
        - Existe uma tarefa para o alarme ?</p>
      <br>
      <h2>Sugestão ST3 – Programação Concorrente </h2>
    </div>
    <p><a href="https://youtu.be/s0IuskyyqwI">VÍDEO: Descrição do Trabalho 3:
        Simulação como um Programa Concorrente<br>
      </a> </p>
    <p> Implemente uma simulação usando programação concorrente, onde os
      elementos ativos (pessoas, carros, máquinas, etc) são representados por
      threads, e os elementos passivos usados por eles (elevador, cruzamento,
      peças, etc) são representados por monitores acessados pelas threads.</p>
    <br>
    A simulação será construida como um programa concorrente em C usando a
    biblioteca das pthreads. Os elementos ativos são representados por threads,
    e a descrição do ambiente onde ocorre a interação entre eles deve ser feita
    através de variáveis globais compartilhadas, cujo acesso é regulado por
    monitores. A evolução do estado do sistema ocorre conforme a dinâmica do
    sistema simulado. Sleep pode ser usado para simular ações demoradas.<br>
    <br>
    Exemplos de sistemas que podem ser simulados: tráfego urbano, tráfego aéreo,
    tráfego ferroviário, manufatura, bolsa de valores, sistemas militares,
    sistemas ecológicos, etc.<br>
    <br>
    Cada grupo deve descrever sua proposta e obter aprovação para ela antes de
    implementar. Cada grupo deve implementar uma simulação diferente.<br>
    <br>
    A simulação será realizada por um programa único composto por muitas
    threads. O uso de comunicação via UDP é opcional, não será cobrado. Mas pode
    ser usado caso o grupo julgue conveniente para a simulação em questão.<br>
    <br>
    <div class="Section1"><br>
    </div>
    <div class="Section1"><br>
    </div>
    <div class="Section1">
      <h2>Sugestão ST4 - Trabalho do controlador de sistemas contínuos no
        FreeRTOS</h2>
    </div>
    <div class="Section1">Implementar o controle e a supervisão do sistema
      descrito <a href="controle-caldeira-2.pdf">aqui</a>.<br>
      <br>
      Para iniciar o desenvolvimento do sistema utilize o tutorial criado por
      Alan Kunz Cechinel,</div>
    <div class="Section1">disponível no repositório: <a href="https://github.com/alankc/FreeRTOS_Posix_Socket"
        target="_blank">https://github.com/alankc/FreeRTOS_Posix_Socket</a><br>
      <br>
      <a href="aquecedor2008_1.jar">Simulador</a> é usado para simular uma
      unidade de caldeira e é chamado com:<br>
      java -jar aquecedor2008_1.jar &lt;número-porta-escutada&gt;<br>
      <br>
      A caldeira possui instrumentação embutida e aceita os seguintes comandos:<br>
      "sta0" lê valor de Ta<br>
      "st-0" lê valor de T<br>
      "sti0" lê valor de Ti<br>
      "sno0" lê valor de No<br>
      "sh-0" lê valor de H<br>
      "ani123.4" define valor de Ni como 123.4<br>
      "aq-567.8" define valor de Q como 567.8<br>
      "ana123.4" define valor de Na como 123.4<br>
      "anf123.4" define valor de Nf como 123.4<br>
      <br>
      Cuidado com a formatação dos valores em ponto flutuante.<br>
      <br>
      Implementar em C usando FreeRTOS Posix o programa CONTROLADOR, o qual deve
      incluir as seguintes funcionalidades de controle:<br>
      <br>
      - Laço de controle como tarefa periódica para a temperatura;<br>
      <br>
      - Laço de controle como tarefa periódica para o nível (pode considerar
      estratégias separadas e não multivariável);<br>
      <br>
      - Uso do tanque auxiliar e da saída de água;<br>
      <br>
      - Informações na tela sobre a situação corrente;<br>
      <br>
      - Verificação da temperatura a cada 10ms para disparo de tarefa de alarme
      caso esteja acima de 30 graus. <br>
      Essa funcionalidade deve ser implementada utilizando notificações do
      freeRTOS (Documentação:
      https://www.freertos.org/RTOS-task-notifications.html)<br>
      <br>
      - Valores de referência para nível e temperatura devem ser configurados no
      próprio código;<br>
      <br>
      - Armazenagem periódica dos dez últimos valores lidos de temperatura.
      Apresentar a média destes valores na tela e conjunto com os demais dados.<br>
      <br>
      - Medir o tempo em segundos para o sistema sair do estágio inicial e
      chegar a 5% do valor de referência para temperatura. Começar a apresentar
      este dado na tela apenas quando a caldeira alcançar 5% do valor de
      referência pela primeira vez. (Pode utilizar: xTaskGetTickCount())<br>
      <br>
      Outros requisitos:<br>
      - Usar mutex para proteger as variáveis compartilhadas;<br>
      - Tarefas periódicas devem ser implementadas utilizando a função
      vTaskDelayUntil;<br>
      - Período do controlador de temperatura deve ser 50ms;<br>
      - Período do controlador de nível deve ser 70ms;<br>
      - Atualização da tela com período de 1 segundo. <br>
      <br>
      Alguns aspectos para a composição da nota do trabalho do controlador:<br>
      - Fez no Linux, em C, usando o freeRTOS Posix ?<br>
      - Foi usado um mutex para cada estrutura compartilhada ?<br>
      - A aplicação apresenta valores dos sensores na tela ?<br>
      - A aplicação possui laços de controle para temperatura e nível ?<br>
      - A aplicação apresenta média dos últimos dez valores de temperatura
      lidos?<br>
      - A aplicação mede o tempo para chegar a 5% do valor de referência e
      mostra na tela apenas no momento adequado?<br>
      - Existe uma tarefa para o alarme ?<br>
      - Implementou o alarme utilizando notificação no freeRTOS?</div>
    <div class="Section1"><br>
    </div>
    <div class="Section1"><br>
    </div>
    <div class="Section1">
      <h2>Sugestão ST5 - Controlador sequencial para um boiler com aquecimento
        solar</h2>
      <p><a href="https://youtu.be/Lg83hZlJXfw">VÍDEO: Descrição do Trabalho 5
          (1 de 3): Descrição da planta e sua instrumentação</a></p>
      <p><a href="https://youtu.be/8QG7dBfibG0">VÍDEO: Descrição do Trabalho 5
          (2 de 3): Simulador da planta</a> </p>
      <p><a href="https://youtu.be/j9AjhGC1jK8">VÍDEO: Descrição do Trabalho 5
          (3 de 3): Comunicação com o simulador da planta</a></p>
      <p> </p>
      <p><br>
      </p>
      <p>Implementar o controle de um boiler com aquecimento solar. Os coletores
        solares ficam abaixo do boiler para que a água desça do boiler para os
        coletores por gravidade. Existe uma bomba para levar água de volta dos
        coletores para o boiler. Desta maneira os coletores estão sempre cheios
        de água, a não ser que o boiler esteja completamente vazio. Também
        existe um mecanismo de recirculação da água dos canos do prédio para o
        boiler. Caso a temperatura da água nos canos esteja muito baixa é
        possível acionar uma bomba que leva a água dos canos de volta para o
        boiler e por gravidade a água do boiler preenche os canos novamente. Os
        canos estão sempre cheios de&nbsp; água, a não ser que o boiler esteja
        completamente vazio.</p>
      <p><b>Características físicas:</b></p>
      <p>Temperatura da água de entrada: &nbsp; 16.0 Celsius<br>
        Vazão de entrada:&nbsp;&nbsp; 35.0/60.0 l/s<br>
        Vazão de esgotamento:&nbsp;&nbsp; 45.0/60.0 l/s<br>
        Vazão de uma bomba:&nbsp;&nbsp; 50.0/60.0 l/s<br>
        Potência do boiler:&nbsp;&nbsp; 8000 J/s<br>
        Capacidade do boiler:&nbsp;&nbsp; 1200.0 l<br>
        Área da base do boiler:&nbsp;&nbsp; 2.0 m^2<br>
        Capacidade dos coletores solares:&nbsp;&nbsp; 1800.0 l<br>
        Capacidade dos canos:&nbsp;&nbsp;&nbsp; 45.0 l<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <br>
        <b>Acionamentos on/off:</b></p>
      <p>Bomba do coletor solar<br>
        Bomba de recirculacao<br>
        Aquecedor elétrico no boiler<br>
        Válvula de entrada de água<br>
        Válvula de esgotamento</p>
      <p><b>Sensores lidos:</b> </p>
      <p>Nível da água no boiler<br>
        Temperatura da água no boiler<br>
        Temperatura da água nos coletores solares<br>
        Temperatura da água nos canos</p>
    </div>
    <div class="Section1">
      <p>O controlador acessa a instrumentação da planta através de mensagens
        UDP/IP no modo cliente/servidor. Para cada string de comando enviado
        pelo controlador existe um string de resposta retornado pela
        instrumentação:</p>
      <p>Pedido para ligar/desligar a bomba do coletor<br>
        &nbsp;&nbsp;&nbsp; "bombacoletor &lt;1 ou 0&gt;"<br>
        Resposta <br>
        &nbsp;&nbsp;&nbsp; "zbombacoletor &lt;1 ou 0&gt;"<br>
        <br>
        Pedido para ligar/desligar a bomba de circulacao<br>
        &nbsp;&nbsp;&nbsp; "bombacirculacao &lt;1 ou 0&gt;<br>
        Resposta <br>
        &nbsp;&nbsp;&nbsp; "zbombacirculacao &lt;1 ou 0&gt;<br>
        <br>
        Pedido para ligar/desligar o aquecedor eletrico<br>
        &nbsp;&nbsp;&nbsp; "aquecedor" &lt;1 ou 0&gt;<br>
        Resposta <br>
        &nbsp;&nbsp;&nbsp; "zaquecedor &lt;1 ou 0&gt;<br>
        <br>
        Pedido para ligar/desligar a válvula de entrada<br>
        &nbsp;&nbsp;&nbsp; "valvulaentrada &lt;1 ou 0&gt;<br>
        Resposta <br>
        &nbsp;&nbsp;&nbsp; "zvalvulaentrada &lt;1 ou 0&gt;<br>
        <br>
        Pedido para ligar/desligar a válvula de esgoto<br>
        &nbsp;&nbsp;&nbsp; "valvulaesgoto &lt;1 ou 0&gt;<br>
        Resposta <br>
        &nbsp;&nbsp;&nbsp; "zvalvulaesgoto &lt;1 ou 0&gt;"<br>
        <br>
        Pedido para ler o nível do boiler<br>
        &nbsp;&nbsp;&nbsp; "nivelboiler"<br>
        Resposta <br>
        &nbsp;&nbsp;&nbsp; "znivelboiler &lt;nível em metros&gt;"<br>
        <br>
        Pedido para ler a temperatura do boiler<br>
        &nbsp;&nbsp;&nbsp; "tempboiler"<br>
        Resposta<br>
        &nbsp;&nbsp;&nbsp; "ztempboiler &lt;temperatura em graus celsius&gt;"<br>
        <br>
        Pedido para ler a temperatura do coletor<br>
        &nbsp;&nbsp;&nbsp; "tempcoletor"<br>
        Resposta<br>
        &nbsp;&nbsp;&nbsp; "ztempcoletor &lt;temperatura em graus celsius&gt;"<br>
        <br>
        Pedido para ler a temperatura dos canos<br>
        &nbsp;&nbsp;&nbsp; "tempcanos"<br>
        Resposta<br>
        &nbsp;&nbsp;&nbsp; "ztempcanos &lt;temperatura em graus celsius&gt;"<br>
        <br>
        Por sua vez, o controlador recebe de uma aplicação na nuvem (IoT)
        mensagens com a temperatura de referência para o boiler. O controlador
        não precisa responder a estas mensagens. A mensagem em questão é apenas
        um número inteiro entre 30 e 60, sendo esta a temperatura desejada para
        a água do boiler.</p>
      <br>
      <p> <a href="solar2022-2022-05-03.zip">Simulador</a> é usado para simular
        a planta em tempo real e é chamado com: <br>
        ./solar2022&nbsp;&nbsp; &lt;número-porta-instrumentação&gt;</p>
      <p>O controlador acessa a instrumentação através da porta
        &lt;número-porta-instrumentação&gt;, como cliente e a instrumentação
        como servidor.</p>
      <p>O controlador recebe mensagens da nuvem através da porta&nbsp;
        &lt;número-porta-instrumentação&gt; + 1.</p>
      <p>A simulação ocorre em tempo real, mas a simulação para no caso de erro
        como boiler vazio ou capacidade do boiler esgotada.</p>
      <p><br>
      </p>
      <p>Implementar em C no Linux o programa controlador, o qual deve incluir
        as seguintes funcionalidades: </p>
      <p>- Laço de controle como tarefa periódica para a temperatura do boiler e
        nível do boiler;</p>
      <p>- Coloca informações na tela sobre a situação corrente (estado da
        planta).</p>
    </div>
    <div class="Section1"><br>
    </div>
    <div class="Section1">Outros requisitos: <br>
      <p> - Não usar threads (serão usadas no trabalho ST6);<br>
        - Período do controlador de temperatura deve ser 30ms exato, ver exemplo
        mais acima nesta página;<br>
        - Atualização da tela pode ser aproximadamente a cada 1 segundo.<br>
        - Referência de temperatura 45 graus Celsius.<br>
        - Referência de nível em 75% da capacidade.<br>
        - Acionar a bomba de recirculação quando temperatura nos canos ficar 5
        graus Celsius abaixo da do boiler.<br>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>
      <h3>Medições de tempo real</h3>
      <p class="MsoNormal">Partindo do programa controlador desenvolvido, meça o
        tempo de resposta do controlador. </p>
      <p>O tempo de resposta inicia no momento t de acordar. Após concluir o
        controlador, antes de calcular o novo t de acordar, obtenha a hora atual
        t1. Com "t1 - t" temos o tempo de resposta do controlador em questão.
        Cuidado com a divisão de segundos e nanosegundos. Para maior precisão,
        NÃO converta para float ou double, mas mantenha em long+long (segundos e
        nanosegundos) até fazer a subtração.<br>
        <br>
        Armazene esta informação em um array e depois de algum tempo grave em
        arquivo.</p>
      <p>Apresente um <strong>histograma</strong> destas medições. Identifique
        o pior caso, isto é, o maior tempo de resposta observado (high water
        mark). <br>
        <br>
        Até que período seria possível levar o controlador nestas condições de
        execução ? </p>
      <p>Usar as funções clock_nanosleep e clock_gettime.</p>
      <p>Adicionalmente:</p>
      <p>- Número de amostras &gt;= 10000.</p>
      <p>- Usar como unidade microsegundo nos gráficos.</p>
      <p>- Fazer a coleta dos dados em máquina real e não em máquina virtual.</p>
      <p>- Gerar relatório em PDF com texto descrevendo as observações e os
        gráficos.</p>
      <br>
      <p> </p>
      <h2>Sugestão ST6 - Controlador concorrente para um boiler com aquecimento
        solar</h2>
      Implementar o controle de um boiler com aquecimento solar, descrito na
      sugestão ST5, como um programa concorrente. Implementar em C no Linux
      utilizando a biblioteca das pthreads. </div>
    <p> </p>
    <p>Incluir:</p>
    <p>- Armazenagem periódica dos valores lidos em arquivo, através de buffer
      duplo (produtor/consumidor). Incluir anotação de tempo (timestamp);</p>
    <p>- Aceita mensagens com o valor de referência para a temperatura do
      boiler; </p>
    <p>- Aceita pelo teclado novo valor de referência para a temperatura do
      boiler;</p>
    <p>- Emitir alarme na tela caso o nível do boiler chegue perto dos valores
      limites.</p>
    <br>
    <div class="Section1">Alguns aspectos para a composição da nota do trabalho
      do controlador: <br>
      - Fez no Linux, em C, usando a biblioteca das pthreads ? <br>
      - Foi usado um mutex para cada estrutura de dados compartilhada ? <br>
      - A aplicação apresenta valores dos sensores na tela ? <br>
      - A aplicação possui laços de controle para temperatura e nível ? <br>
      - A aplicação acessa teclado durante a execução do controlador, afeta
      valor de referência ? </div>
    <div class="Section1">- A aplicação recebe mensagens com o valor de
      referência da temperatura ?</div>
    <div class="Section1"> - As tarefas de controle são realmente periódicas,
      implementadas com precisão e não com sleep fixo ?</div>
    <p><br>
    </p>
    <div class="Section1">
      <h2>Sugestão ST7 - Simulador concorrente em tempo real</h2>
    </div>
    <div class="Section1"><a href="https://youtu.be/Lg83hZlJXfw">VÍDEO:
        Descrição do Trabalho 5 (1 de 3): Descrição da planta e sua
        instrumentação</a> <br>
      <a href="https://youtu.be/8QG7dBfibG0"><br>
      </a></div>
    <div class="Section1"><a href="https://youtu.be/8QG7dBfibG0">VÍDEO:
        Descrição do Trabalho 5 (2 de 3): Simulador da planta</a> <br>
      <br>
      <a href="https://youtu.be/j9AjhGC1jK8">VÍDEO: Descrição do Trabalho 5 (3
        de 3): Comunicação com o simulador da planta</a><br>
      <br>
      <br>
      Código fonte do&nbsp; <a href="solar2022-2022-05-03.zip">Simulador</a><br>
      <br>
      <br>
      <a href="https://youtu.be/AD3JC5o-mgA"> VÍDEO: Descrição do código fonte
        do módulo solar2022.c</a></div>
    <div class="Section1"><a href="https://youtu.be/8QG7dBfibG0"><br>
      </a></div>
    <p></p>
    <br>
    <div class="Section1">A partir do código fonte do simulador usado na
      sugestão ST5, implemente um simulador concorrente usando a biblioteca das
      pthreads, o qual simula em tempo real uma planta de sua escolha. A planta
      em questão deve ter no mínimo 4 atuadores e 4 sensores. A dinâmica pode
      ser totalmente contínua ou híbrida, mas não pode ser totalmente discreta.
      A dinâmica da planta deve ser lenta o bastante para que passos de
      simulação de 1ms forneçam realismo razoável.</div>
    <div class="Section1"><br>
    </div>
    <div class="Section1">Para implementar o simulador é conveniente descrever a
      dinâmica da planta com equações diferenciais, no domínio do tempo. A
      atualização das variáveis contínuas é feita a partir de uma integração
      numérica simples. Use o simulador do ST5 como ponto de partida.</div>
    <div class="Section1"><br>
      <p class="MsoNormal"> </p>
      <p class="MsoNormal"> </p>
      <h2>Sugestão ST8 - Análise temporal do controlador concorrente</h2>
      Faça uma análise temporal do simulador implementado na sugestão ST7. Meça
      o desempenho da thread responsável por atualizar as variáveis de estado da
      planta e gere gráficos como aparecem nas figuras 16.1, 16.2, 16.3 e 16.4
      do capítulo 16 do livro. Considere como deadline e período desta tarefa a
      duração do passo de simulação, dado que a simulação ocorre em tempo real.
      Caso nenhum deadline seja perdido com um passo de 1ms, diminua a duração
      do passo de simulação até alguns deadlines serem perdidos.</div>
    <div class="Section1"><br>
    </div>
    <div class="Section1">
      <h2>Sugestão ST9 - Internet das Coisas, Lado da Nuvem</h2>
      <a href="https://youtu.be/ftbaUzVoZuo">VÍDEO: Descrição dos Trabalhos ST9
        e ST10 (1 de 4): Internet das Coisas (Visão Geral)</a>
      <div class="Section1"><br>
      </div>
    </div>
    <div class="Section1"><a href="https://youtu.be/w3S0MkBNZP0">VÍDEO:
        Descrição dos Trabalhos ST9 e ST10 (2 de 4): Internet das Coisas
        (Exemplo)</a>
      <div class="Section1"><br>
      </div>
      <div class="Section1"><a href="https://youtu.be/BqU1rChYgBI">VÍDEO:
          Descrição dos Trabalhos ST9 e ST10 (3 de 4): Internet das Coisas (Lado
          Nuvem)</a>
        <div class="Section1"><br>
        </div>
      </div>
    </div>
    <div class="Section1"><a href="https://youtu.be/ciDnxTcb_wU">VÍDEO:
        Descrição dos Trabalhos ST9 e ST10 (4 de 4): Internet das Coisas (Lado
        Dispositivo)</a> </div>
    <div class="Section1"><br>
    </div>
    <div class="Section1"> Através da plataforma WEGnology ou Losant implemente
      uma aplicação na nuvem que suporte uma página web de acesso ao controlador
      da planta da Caldeira (ST2) ou do Boiler com Aquecimento Solar (ST6).</div>
    <div class="Section1"><br>
    </div>
    <div class="Section1">Neste trabalho implemente apenas o lado da Nuvem, com
      acesso ao estado da planta e o envio de comandos ou valores de referência
      para o controlador. Imagine que existirá um controlador
      (device/dispositivo de campo) com o qual a aplicação da Nuvem trocará
      dados.</div>
    <div class="Section1"><br>
    </div>
    <div class="Section1"> Para testar o lado da Nuvem adapte o programa abaixo,
      o qual deverá fazer a comunicação como se fosse o controlador da planta.</div>
    <div class="Section1"><a href="mqtt_cliente.c">mqtt_cliente.c</a></div>
    <div class="Section1"><br>
    </div>
    <div class="Section1">REFERÊNCIAS:</div>
    <div class="Section1"><br>
    </div>
    <div class="Section1"> Linha de compilação<br>
      gcc -o mqtt_cliente mqtt_cliente.c&nbsp; -lmosquitto<br>
      <br>
      Página da Weg sobre WEGnology <br>
      <a href="https://www.weg.net/institutional/BR/pt/solutions/digital-solutions/wegnology">https://www.weg.net/institutional/BR/pt/solutions/digital-solutions/wegnology</a><br>
      <br>
      Vídeo de introdução da WEGnology<br>
      <a href="https://www.youtube.com/watch?v=GPXuY0NjaHM">https://www.youtube.com/watch?v=GPXuY0NjaHM<br>
      </a><br>
      Documentação da WEGnology<br>
      <a href="https://docs.app.wnology.io/">https://docs.app.wnology.io/</a><br>
      <br>
      Página de login na plataforma WEGnology<br>
      <a href="https://accounts.app.wnology.io/signin?">https://accounts.app.wnology.io/signin?</a><br>
      <br>
      Introdução ao MQTT (UFRJ)<br>
      <a href="https://www.gta.ufrj.br/ensino/eel878/redes1-2019-1/vf/mqtt/">https://www.gta.ufrj.br/ensino/eel878/redes1-2019-1/vf/mqtt/</a><br>
      <br>
      Site do MQTT<br>
      <a href="https://mqtt.org/">https://mqtt.org/</a><br>
      <br>
      Cursos da Losant University<br>
      <a href="https://www.losant.com/university">https://www.losant.com/university</a><br>
      <br>
      Trabalho de Leon Cesar Carmona<br>
      <a href="https://repositorio.ufsc.br/handle/123456789/233253">https://repositorio.ufsc.br/handle/123456789/233253</a><br>
      <br>
      Programas para testar o broker Mosquitto, mostra como programar clientes<br>
      <a href="https://github.com/eclipse/mosquitto/tree/master/test/lib/c">https://github.com/eclipse/mosquitto/tree/master/test/lib/c</a><br>
      <br>
      Man da libmosquitto<br>
      <a href="https://mosquitto.org/man/libmosquitto-3.html">https://mosquitto.org/man/libmosquitto-3.html</a><br>
      &nbsp;&nbsp;&nbsp; <br>
      API do libmosquitto, a biblioteca cliente do Mosquitto:<br>
      <a href="https://mosquitto.org/api/files/mosquitto-h.html">https://mosquitto.org/api/files/mosquitto-h.html</a><br>
      <br>
      A biblioteca Paho para clientes MQTT também pode ser usada<br>
      <a href="https://www.embarcados.com.br/paho-mqtt-em-c-no-linux-embarcado/">https://www.embarcados.com.br/paho-mqtt-em-c-no-linux-embarcado/</a><br>
      <br>
      Exemplos de uso da biblioteca cliente libmosquitto<br>
      <a href="https://github.com/eclipse/mosquitto/blob/master/examples/publish/basic-1.c">https://github.com/eclipse/mosquitto/blob/master/examples/publish/basic-1.c</a><br>
      <a href="https://github.com/eclipse/mosquitto/blob/master/examples/subscribe/basic-1.c">https://github.com/eclipse/mosquitto/blob/master/examples/subscribe/basic-1.c</a><br>
      <br>
      Como a WEGnology espera as mensagens<br>
      <a href="https://docs.app.wnology.io/mqtt/overview/">https://docs.app.wnology.io/mqtt/overview/</a><br>
      <a href="https://docs.app.wnology.io/devices/state/">https://docs.app.wnology.io/devices/state/</a><br>
      <a href="https://docs.app.wnology.io/devices/commands/">https://docs.app.wnology.io/devices/commands/</a></div>
    <div class="Section1"><br>
      <p class="MsoNormal"> </p>
      <p class="MsoNormal"> </p>
      <h2>Sugestão ST10 -&nbsp; Internet das Coisas, Lado do Dispositivo</h2>
      Adapte o controlador construído no ST2 ou no ST6 para que o mesmo atue
      como dispositivo de campo em um contexo de Internet das Coisas,
      interagindo com a aplicação na nuvem construída no ST9. Todos os vídeos e
      referências do ST9 são também válidos para o ST10.</div>
    <div class="Section1"><br>
    </div>
    <br>
    <div class="Section1"><br>
      <p class="MsoNormal"> </p>
    </div>
  </body>
</html>
